<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>DonVotex - Sistema de Votaciones</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="https://i.ibb.co/wZ0PH190/vote-icono.png" />
  <style>
    :root {
      --color-fondo: #0d1117;
      --color-texto: #c9d1d9;
      --color-primario: #00d9ff;
      --glass: rgba(255, 255, 255, 0.05);
      --borde: #30363d;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', system-ui, -apple-system, Arial, sans-serif;
      background-color: var(--color-fondo);
      color: var(--color-texto);
      overflow-x: hidden;
    }

    .background-anim {
      position: fixed; inset: 0;
      z-index: -1;
      overflow: hidden;
      pointer-events: none;
    }
    .bubble {
      position: absolute;
      width: 40px; height: 40px;
      background-color: var(--color-primario);
      border-radius: 50%;
      opacity: 0.3;
      animation: float 10s linear infinite;
    }
    @keyframes float {
      0% { transform: translateY(100vh) scale(0.5); opacity: 0.3; }
      100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
    }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 40px 20px;
      text-align: center;
      animation: fadeIn 1.2s ease-out;
    }
    h1 {
      font-size: 2.8em;
      color: var(--color-primario);
      text-shadow: 0 0 10px #00d9ff;
      animation: zoomIn 1.2s ease-out;
      margin: 0 0 10px;
    }
    @keyframes zoomIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    h2 { color: var(--color-primario); margin: 30px 0 10px; }
    p { color: #b7c0cc; line-height: 1.6; margin: 0 0 18px; }

    .card {
      background-color: var(--glass);
      backdrop-filter: blur(10px);
      padding: 28px;
      border-radius: 16px;
      border: 1px solid var(--borde);
      margin-bottom: 40px;
      box-shadow: 0 0 15px #00d9ff20;
      text-align: left;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: linear-gradient(145deg, #00d9ff, #0099cc);
      color: #03131a;
      padding: 12px 20px;
      margin: 8px 10px 0 0;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.28s ease, filter .18s ease;
      box-shadow: 0 4px 12px #00d9ff60;
      user-select: none;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px #00d9ff99; filter: brightness(1.03); }
    .btn:active { transform: translateY(0); }

    .btn-rojo { background: #d9534f; color: #fff; }
    .btn-rojo:hover { filter: brightness(1.05); }

    /* Lista bonita */
    ul {
      list-style: none; padding: 0; margin: 0;
    }
    ul li {
      background: rgba(255,255,255,0.03);
      padding: 12px 14px;
      margin: 10px 0;
      border-left: 4px solid var(--color-primario);
      border-radius: 0 10px 10px 0;
    }

    /* Descargas */
    #barraCarga {
      width: 100%; max-width: 420px; height: 18px;
      margin: 16px 0 8px;
      background: #222c;
      border: 1px solid #2b333b;
      border-radius: 10px; overflow: hidden;
      display: none;
    }
    #progreso {
      height: 100%; width: 0%;
      background: linear-gradient(90deg, var(--color-primario), #00aaff);
      transition: width 0.35s ease;
    }
    #info { min-height: 1.2em; font-size: .92rem; color: #8ab4ff; }

    .future-notice {
      background: #2c2c00cc;
      color: #ffffa1;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #a3a300;
      margin-top: 50px;
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

    /* ---------- MODAL OSCURO PARA PARCHES ---------- */
    .modal {
      position: fixed; inset: 0; display: none;
      background: rgba(0,0,0,0.6);
      align-items: center; justify-content: center;
      z-index: 9999;
    }
    .modal.activo { display: flex; }
    .modal__box {
      width: 92%; max-width: 430px;
      background: #14181d;
      border: 1px solid #27313a;
      color: #e8eef6;
      border-radius: 16px;
      box-shadow: 0 20px 80px rgba(0,0,0,.5);
      padding: 22px;
      animation: modalIn .18s ease-out;
      text-align: center;
    }
    @keyframes modalIn { from { transform: translateY(10px); opacity: .6; } to { transform: translateY(0); opacity: 1; } }
    .modal__title { margin: 4px 0 10px; color: #8ddcff; font-size: 1.2rem; }
    .modal__text { color: #cfd6df; margin: 6px 0 14px; }

    .spinner {
      margin: 12px auto;
      width: 44px; height: 44px;
      border: 4px solid #2b3137;
      border-top: 4px solid var(--color-primario);
      border-radius: 50%;
      animation: girar 1s linear infinite;
    }
    @keyframes girar { to { transform: rotate(360deg); } }

    .dots::after {
      content: ''; display: inline-block; width: 1.5ch; text-align: left;
      animation: puntos 1.1s steps(3, end) infinite;
    }
    @keyframes puntos {
      0% { content: ''; }
      33% { content: '.'; }
      66% { content: '..'; }
      100% { content: '...'; }
    }

    .progress {
      margin: 10px auto 6px; width: 100%; max-width: 340px; height: 12px;
      background: #0f141a; border: 1px solid #26303a; border-radius: 999px; overflow: hidden;
    }
    .progress__bar {
      width: 0%; height: 100%; background: linear-gradient(90deg, #00d9ff, #00a1ff);
      transition: width .25s ease;
    }

    .modal__actions { margin-top: 14px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .modal__hint { font-size: .85rem; color: #9fb3c7; margin-top: 8px; }
  </style>
</head>
<body>
  <!-- Fondo animado -->
  <div class="background-anim">
    <div class="bubble" style="left: 10%; animation-delay: 0s;"></div>
    <div class="bubble" style="left: 25%; animation-delay: 2s;"></div>
    <div class="bubble" style="left: 40%; animation-delay: 4s;"></div>
    <div class="bubble" style="left: 60%; animation-delay: 1s;"></div>
    <div class="bubble" style="left: 75%; animation-delay: 3s;"></div>
    <div class="bubble" style="left: 90%; animation-delay: 5s;"></div>
  </div>

  <div class="container">
    <h1>DonVotex 2025</h1>
    <p>La plataforma moderna, r√°pida y segura para votaciones estudiantiles.Sin internet ni instalaci√≥n complicada</p>

    <!-- DESCARGAS -->
  <!-- Bot√≥n EXE -->
<a href="https://www.dropbox.com/scl/fi/vzi596t02ktyv8urkowcz/Donvoltex_Server_1.0.1.exe?rlkey=7eiz0ibulubboqt9tzvrbrwkh&st=e6uyfa2t&dl=1" 
   download="Donvoltex_Server_1.0.1.exe" 
   class="btn">
  ‚öôÔ∏è Archivo .Exe (Recomendado‚úÖ)
</a>

<!-- Bot√≥n ZIP -->
<a href="https://www.dropbox.com/scl/fi/5padd3wk5ie0bysovf4si/Donvoltex_Server_1.0.1.zip?rlkey=jlpo28ogwwos1l9l4m7kz3iey&st=6xm3xvbe&dl=1" 
   download="Donvoltex_Server_1.0.1.zip" 
   class="btn">
  üì¶ Archivo .Zip
</a>


    <!-- PARCHES -->
    <div id="patch-section" class="card" style="text-align:left;">
      <h2>üõ† Parches de Error</h2>
      <p>Si tu sistema presenta fallas como:</p>
      <ul>
        <li>Errores al iniciar.</li>
        <li>Fallas en el conteo de votos o candidatos.</li>
        <li>Problemas de compatibilidad (bus, navegador o pantalla negra).</li>
      </ul>
      <p>Haz clic en el bot√≥n <strong>"Buscar Parche"</strong> para comprobar si hay uno disponible.</p>
      <button class="btn" id="btnBuscarParche">üîç Buscar Parche</button>
    </div>

    <h2>Novedades</h2>
    <ul class="card">
      <li><strong>üó≥ M√≥dulo de candidatos:</strong> registro y votaci√≥n inteligente.</li>
      <li><strong>‚ö° Ultra r√°pido:</strong> sin internet ni instalaci√≥n complicada.</li>
      <li><strong>üõ° Mayor seguridad:</strong> validaci√≥n y protecci√≥n mejorada.</li>
    </ul>

    <div class="future-notice">
      <h3>üîÆ DonVotex Web 2027</h3>
      <p>Estamos implementando la versi√≥n web accesible desde cualquier dispositivo.</p>
      <ul>
        <li>üì± Compatible con celulares Androi- iOS >
        <li>üßë‚Äçüíª Panel exclusivo para jurados y observadores.</li>
        <li>üìä Gr√°ficos en resultados</li>
       <li>üîí Seguridad mejorada en votos</li>
      <li>üì± Versi√≥n m√≥vil optimizada</li>
     <li>üïí Historial de elecciones anteriores</li>
      <li>üîî Notificaciones en tiempo real</li>
    <li>üé® Personalizaci√≥n de interfaz</li>
   <li>üë• Control de roles y permisos</li>
  <li>üì• Exportar resultados en PDF/Excel</li>

      </ul>
      <p style="margin-top: 10px; font-size: 0.9em;"><em>¬© 2025 Reservado a Doni Beltr√°n Villalba | I.E.R Jhon F. Kennedy Sede el Cinco</em></p>
    </div>
  </div>

  <!-- MODAL PARCHES -->
  <div id="modalParche" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
    <div class="modal__box">
      <h3 id="modalTitle" class="modal__title">Buscando parches</h3>
      <div id="modalBody" class="modal__text">
        <div class="spinner" aria-hidden="true"></div>
        <div class="dots" aria-live="polite">Por favor espera</div>
      </div>
      <div id="modalExtras"></div>
      <div class="modal__actions" id="modalActions">
        <!-- Botones din√°micos -->
      </div>
      <div class="modal__hint" id="modalHint"></div>
    </div>
  </div>

  <script>
    // ================== CONFIG ==================
    const archivos = {
      zip: "https://www.dropbox.com/scl/fi/av0q1tx1rgzkq3mg1ppmh/server.zip?rlkey=w0mjdi573tup1t6ies5qohbio&raw=1",
      exe: "https://www.dropbox.com/scl/fi/ia6kr2yht71ktd04e4tlo/InstaladorDonVotex.exe?rlkey=pg2emnumfa3co883g3tteezrp&raw=1",
      // Reemplaza este link cuando tengas un parche real:
      parche: "https://www.dropbox.com/scl/fi/xxxxx/parche.exe?raw=1"
    };

    // ============ DESCARGAS GENERALES ============
    let descargaEnProgreso = false;

    function iniciarDescarga(tipo) {
      if (descargaEnProgreso) {
        alert("‚è≥ Espera que termine la descarga anterior.");
        return;
      }
      const url = archivos[tipo];
      if (!url) {
        alert("‚ö†Ô∏è Link no configurado.");
        return;
      }
      descargaEnProgreso = true;

      const barra = document.getElementById("barraCarga");
      const progreso = document.getElementById("progreso");
      const info = document.getElementById("info");

      barra.style.display = "block";
      progreso.style.width = "0%";
      info.textContent = "‚è≥ Preparando archivo...";

      let porcentaje = 0;
      const animacion = setInterval(() => {
        porcentaje += Math.random() * 18 + 5;
        if (porcentaje >= 100) porcentaje = 100;
        progreso.style.width = porcentaje + "%";
        info.textContent = `Descargando... ${Math.round(porcentaje)}%`;

        if (porcentaje >= 100) {
          clearInterval(animacion);
          info.textContent = "‚úî Descarga iniciada";
          const link = document.createElement('a');
          link.href = url;
          link.setAttribute('download', '');
          link.style.display = 'none';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);

          setTimeout(() => {
            barra.style.display = "none";
            info.textContent = "";
            descargaEnProgreso = false;
          }, 1600);
        }
      }, 110);
    }

    // ============ MODAL UTILIDADES ============
    const modal = document.getElementById("modalParche");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const modalExtras = document.getElementById("modalExtras");
    const modalActions = document.getElementById("modalActions");
    const modalHint = document.getElementById("modalHint");

    function abrirModal() {
      modal.classList.add("activo");
      modal.setAttribute("aria-hidden", "false");
    }
    function cerrarModal() {
      modal.classList.remove("activo");
      modal.setAttribute("aria-hidden", "true");
      // Limpieza
      modalTitle.textContent = "";
      modalBody.innerHTML = "";
      modalExtras.innerHTML = "";
      modalActions.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoBuscando() {
      modalTitle.textContent = "Buscando parches";
      modalBody.innerHTML = `
        <div class="spinner" aria-hidden="true"></div>
        <div class="dots" aria-live="polite">Por favor espera</div>
      `;
      modalActions.innerHTML = `
        <button class="btn btn-rojo" id="btnCancelar">‚ùå Cancelar</button>
      `;
      document.getElementById("btnCancelar").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoDecision() {
      modalTitle.textContent = "üîß Parche disponible";
      modalBody.innerHTML = `
        <div class="modal__text">Se encontr√≥ un parche para tu sistema. ¬øDeseas descargarlo?</div>
      `;
      modalActions.innerHTML = `
        <button class="btn" id="btnDescargar">‚úÖ Descargar</button>
        <button class="btn btn-rojo" id="btnIgnorar">‚ùå Ignorar</button>
      `;
      document.getElementById("btnDescargar").onclick = iniciarDescargaParche;
      document.getElementById("btnIgnorar").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "Podr√°s volver a buscarlo cuando quieras.";
    }

    function estadoNoDisponible() {
      modalTitle.textContent = "No hay parches disponibles";
      modalBody.innerHTML = `<div class="modal__text">Por ahora no hay parches para tu versi√≥n.</div>`;
      modalActions.innerHTML = `<button class="btn" id="btnOk">Entendido</button>`;
      document.getElementById("btnOk").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoError() {
      modalTitle.textContent = "Error al comprobar";
      modalBody.innerHTML = `<div class="modal__text">No se pudo verificar el parche. Revisa tu conexi√≥n o intenta m√°s tarde.</div>`;
      modalActions.innerHTML = `<button class="btn" id="btnCerrarErr">Cerrar</button>`;
      document.getElementById("btnCerrarErr").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoDescargando() {
      modalTitle.textContent = "Descargando parche";
      modalBody.innerHTML = `<div class="modal__text">Iniciando descarga‚Ä¶</div>`;
      modalExtras.innerHTML = `
        <div class="progress" aria-hidden="true"><div id="barParche" class="progress__bar"></div></div>
        <div id="lblParche" class="modal__hint">0%</div>
      `;
      modalActions.innerHTML = `<button class="btn btn-rojo" id="btnCancelarDesc">Cancelar</button>`;
      document.getElementById("btnCancelarDesc").onclick = cerrarModal;
      modalHint.textContent = "";
    }

    function avanzarBarraParche(cbFin) {
      const bar = document.getElementById("barParche");
      const lbl = document.getElementById("lblParche");
      let pct = 0;
      const it = setInterval(() => {
        pct += Math.random() * 20 + 8;
        if (pct >= 100) pct = 100;
        bar.style.width = pct + "%";
        lbl.textContent = Math.round(pct) + "%";
        if (pct >= 100) {
          clearInterval(it);
          cbFin && cbFin();
        }
      }, 280);
      return it;
    }

    // ============ L√ìGICA PARCHES ============
    document.getElementById("btnBuscarParche").addEventListener("click", () => {
      abrirModal();
      estadoBuscando();

      // Espera de 5s "buscando"
      setTimeout(() => {
        // HEAD al link del parche para verificar si existe
        const url = archivos.parche;
        if (!url || /xxxxx/.test(url)) {
          // Link no configurado
          estadoNoDisponible();
          return;
        }
        fetch(url, { method: "HEAD" })
          .then(resp => {
            if (resp.ok) {
              estadoDecision();
            } else {
              estadoNoDisponible();
            }
          })
          .catch(() => estadoError());
      }, 5000);
    });

    function iniciarDescargaParche() {
      estadoDescargando();
      // Simulaci√≥n de progreso y luego dispara descarga real
      avanzarBarraParche(() => {
        // Disparar descarga real
        const a = document.createElement("a");
        a.href = archivos.parche;
        a.setAttribute("download", "ParcheDonVotex.exe");
        document.body.appendChild(a);
        a.click();
        a.remove();

        modalTitle.textContent = "Parche descargado";
        modalBody.innerHTML = `<div class="modal__text">Se inici√≥ la descarga del parche.</div>`;
        modalExtras.innerHTML = "";
        modalActions.innerHTML = `<button class="btn" id="btnCerrarFin">Cerrar</button>`;
        document.getElementById("btnCerrarFin").onclick = cerrarModal;
      });
    }

    // Cerrar modal con tecla ESC
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.classList.contains("activo")) cerrarModal();
    });
  </script>
</body>
</html>




